<div class="ocaml_top"><div class="ocaml_summary"><div class="info">A library for general logging.<p>Although this module is fully Async-safe it exposes almost no Deferreds. This is
partially a design choice to minimize the impact of logging in code, and partially the
result of organic design (i.e. older versions of this interface did the same thing).</p><p>A (limited) <code class="code">Blocking</code> module is supplied to accomodate the portion of a program that
runs outside of Async.</p></div></div>
<div class="ocaml_content"><div class="ocaml_module" name="Level"><pre class="odoccode"><span class="keyword">module</span> <a href="http://127.0.0.1:8000/async_extra/#Log.Level" class="ocaml_internal">Level</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> t</span> = <code class="type">[ `Debug | `Error | `Info ]</code></pre><div class="info">Describes both the level of a log and the level of a message sent to a log. There
is an ordering to levels (`Debug &lt; `Info &lt; `Error), and a log set to a level will
never display messages at a lower log level.</div>
<div class="ocaml_include" path="http://127.0.0.1:8000/core/#Std:Stringable" items="[]" types="[]"><pre class="ocaml_include_handle"><span class="keyword">include</span> <code class="type"><code class="code"><a href="http://127.0.0.1:8000/core/#Std:Stringable">Core.Std.Stringable</a></code> with type t := <a href="http://127.0.0.1:8000/async_extra/#Log.Level.t" class="ocaml_internal">t</a></code></pre><div class="ocaml_summary"/></div>
<pre class="odoccode"><span class="VALarg"><span class="keyword">val</span> arg</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Level.t" class="ocaml_internal">t</a> <a href="http://127.0.0.1:8000/core/#Std.Command.Spec.Arg_type.t">Core.Std.Command.Spec.Arg_type.t</a></code></pre>
<pre class="odoccode"><span class="VALt_of_sexp"><span class="keyword">val</span> t_of_sexp</span> : <code class="type"><a href="http://127.0.0.1:8000/sexplib/#Sexp.t">Sexplib.Sexp.t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Level.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VAL__t_of_sexp__"><span class="keyword">val</span> __t_of_sexp__</span> : <code class="type"><a href="http://127.0.0.1:8000/sexplib/#Sexp.t">Sexplib.Sexp.t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Level.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALsexp_of_t"><span class="keyword">val</span> sexp_of_t</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Level.t" class="ocaml_internal">t</a> -&gt; <a href="http://127.0.0.1:8000/sexplib/#Sexp.t">Sexplib.Sexp.t</a></code></pre></div></div>
<div class="ocaml_module" name="Message"><pre class="odoccode"><span class="keyword">module</span> <a href="http://127.0.0.1:8000/async_extra/#Log.Message" class="ocaml_internal">Message</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> t</span></pre>
<pre class="odoccode"><span class="VALtime"><span class="keyword">val</span> time</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">t</a> -&gt; <a href="http://127.0.0.1:8000/core/#Std.Time.t">Core.Std.Time.t</a></code></pre>
<pre class="odoccode"><span class="VALmessage"><span class="keyword">val</span> message</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">t</a> -&gt; string</code></pre>
<pre class="odoccode"><span class="VALlevel"><span class="keyword">val</span> level</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Level.t" class="ocaml_internal">Level.t</a> option</code></pre>
<pre class="odoccode"><span class="VALtags"><span class="keyword">val</span> tags</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">t</a> -&gt; (string * string) list</code></pre>
<pre class="odoccode"><span class="VALadd_tags"><span class="keyword">val</span> add_tags</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">t</a> -&gt; (string * string) list -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALbin_t"><span class="keyword">val</span> bin_t</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">t</a> <a href="http://127.0.0.1:8000/core/#Std.Bin_prot.Type_class.t">Core.Std.Bin_prot.Type_class.t</a></code></pre>
<pre class="odoccode"><span class="VALbin_read_t"><span class="keyword">val</span> bin_read_t</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">t</a> <a href="http://127.0.0.1:8000/core/#Std.Bin_prot.Read.reader">Core.Std.Bin_prot.Read.reader</a></code></pre>
<pre class="odoccode"><span class="VAL__bin_read_t__"><span class="keyword">val</span> __bin_read_t__</span> : <code class="type">(int -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">t</a>) <a href="http://127.0.0.1:8000/core/#Std.Bin_prot.Read.reader">Core.Std.Bin_prot.Read.reader</a></code></pre>
<pre class="odoccode"><span class="VALbin_reader_t"><span class="keyword">val</span> bin_reader_t</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">t</a> <a href="http://127.0.0.1:8000/core/#Std.Bin_prot.Type_class.reader">Core.Std.Bin_prot.Type_class.reader</a></code></pre>
<pre class="odoccode"><span class="VALbin_size_t"><span class="keyword">val</span> bin_size_t</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">t</a> <a href="http://127.0.0.1:8000/core/#Std.Bin_prot.Size.sizer">Core.Std.Bin_prot.Size.sizer</a></code></pre>
<pre class="odoccode"><span class="VALbin_write_t"><span class="keyword">val</span> bin_write_t</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">t</a> <a href="http://127.0.0.1:8000/core/#Std.Bin_prot.Write.writer">Core.Std.Bin_prot.Write.writer</a></code></pre>
<pre class="odoccode"><span class="VALbin_writer_t"><span class="keyword">val</span> bin_writer_t</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">t</a> <a href="http://127.0.0.1:8000/core/#Std.Bin_prot.Type_class.writer">Core.Std.Bin_prot.Type_class.writer</a></code></pre>
<pre class="odoccode"><span class="VALt_of_sexp"><span class="keyword">val</span> t_of_sexp</span> : <code class="type"><a href="http://127.0.0.1:8000/sexplib/#Sexp.t">Sexplib.Sexp.t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALsexp_of_t"><span class="keyword">val</span> sexp_of_t</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">t</a> -&gt; <a href="http://127.0.0.1:8000/sexplib/#Sexp.t">Sexplib.Sexp.t</a></code></pre></div></div>
<div class="ocaml_module" name="Rotation"><pre class="odoccode"><span class="keyword">module</span> <a href="http://127.0.0.1:8000/async_extra/#Log.Rotation" class="ocaml_internal">Rotation</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> t</span></pre><div class="info">description of boundaries for file rotation.<p>If all fields are <code class="code">None</code> the file will never be rotated. Any field set to <code class="code">Some</code>
will cause rotation to happen when that boundary is crossed. Multiple boundaries
may be set. Log rotation always causses incrementing rotation conditions
(e.g. size) to reset.</p><p>The condition <code class="code">keep</code> is special and does not follow the rules above. When a log is
rotated <code class="code">keep</code> is examined and logs that do not fall under its instructions are
deleted. This deletion takes place on rotation only, and so may not happen. The
meaning of keep options are:</p><ul><li><code class="code">`All</code> -- never delete</li><li><code class="code">`Newer_than span</code> --
delete files with a timestamp older than <code class="code">Time.sub (Time.now ()) span</code>. This
normally means keeping files that contain at least one message logged within
span. If span is short enough this option can delete a just rotated file.</li><li><code class="code">`At_least i</code> -- keep the i most recent files</li></ul>Log rotation does not support symlinks, and you're encouraged to avoid them in
production applications. Issues with symlinks:<ul><li>You can't tail symlinks without being careful (e.g. you must remember to pass
&quot;-F&quot; to
`tail`).</li><li>Symlinks are hard to reason about when the program crashes, especially on
startup (i.e., is the symlink pointing me at the right log file?).</li><li>Atomicity is hard.</li><li>Symlinks encourage tailing, which is a bad way to communicate information.</li><li>They complicate archiving processes (the symlink must be skipped).</li></ul>WARNING: The rotating file functionality of Log is the most poorly tested, and in many
ways the most complex. Before using this mode in anger you should test failure cases
carefully.</div>
<pre class="odoccode"><span class="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">?messages:int -&gt;
?size:<a href="http://127.0.0.1:8000/core/#Std.Byte_units.t">Core.Std.Byte_units.t</a> -&gt;
?time:<a href="http://127.0.0.1:8000/core/#Std.Time.Ofday.t">Core.Std.Time.Ofday.t</a> -&gt;
?zone:<a href="http://127.0.0.1:8000/core/#Std.Time.Zone.t">Core.Std.Time.Zone.t</a> -&gt;
keep:[ `All | `At_least of int | `Newer_than of <a href="http://127.0.0.1:8000/core/#Std.Time.Span.t">Core.Std.Time.Span.t</a> ] -&gt;
naming_scheme:[ `Dated | `Numbered | `Timestamped ] -&gt; unit -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Rotation.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALdefault"><span class="keyword">val</span> default</span> : <code class="type">?zone:<a href="http://127.0.0.1:8000/core/#Std.Time.Zone.t">Core.Std.Time.Zone.t</a> -&gt; unit -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Rotation.t" class="ocaml_internal">t</a></code></pre><div class="info">Sane log rotation defaults.<p>Writes dated log files. Files are rotated every time the day changes in the given
zone (uses the machine's zone by default). If the dated log file already exists,
it's appended to.</p><p>Logs are never deleted. Best practice is to have an external mechanism archive old
logs for long term storage.</p></div>
<pre class="odoccode"><span class="VALt_of_sexp"><span class="keyword">val</span> t_of_sexp</span> : <code class="type"><a href="http://127.0.0.1:8000/sexplib/#Sexp.t">Sexplib.Sexp.t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Rotation.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALsexp_of_t"><span class="keyword">val</span> sexp_of_t</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Rotation.t" class="ocaml_internal">t</a> -&gt; <a href="http://127.0.0.1:8000/sexplib/#Sexp.t">Sexplib.Sexp.t</a></code></pre></div></div>
<div class="ocaml_module" name="Output"><pre class="odoccode"><span class="keyword">module</span> <a href="http://127.0.0.1:8000/async_extra/#Log.Output" class="ocaml_internal">Output</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEmachine_readable_format"><span class="keyword">type</span> machine_readable_format</span> = <code class="type">[ `Bin_prot | `Sexp | `Sexp_hum ]</code></pre>
<pre class="odoccode"><span class="TYPEformat"><span class="keyword">type</span> format</span> = <code class="type">[ `Bin_prot | `Sexp | `Sexp_hum | `Text ]</code></pre>
<pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> t</span></pre>
<pre class="odoccode"><span class="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">(<a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">Message.t</a> <a href="http://127.0.0.1:8000/core/#Std.Queue.t">Core.Std.Queue.t</a> -&gt; unit <a href="http://127.0.0.1:8000/async_extra/#Import.Deferred.t">Import.Deferred.t</a>) -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Output.t" class="ocaml_internal">t</a></code></pre><div class="info"><code class="code">create f</code> returns a t, given a function that actually performs the final output
work. It is the responsibility of the write function to contain all state, and to
clean up after itself when it is garbage collected (which may require a finalizer).<p>The &quot;stock&quot; output modules support a sexp and bin_prot output format, and other
output modules should make efforts to support them as well where it is
meaningful/appropriate to do so.</p><p>The unit Deferred returned by the function should not be fulfilled until the all of
the messages in the given queue are completely handled (e.g. written to disk).</p></div>
<pre class="odoccode"><span class="VALstdout"><span class="keyword">val</span> stdout</span> : <code class="type">unit -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Output.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALstderr"><span class="keyword">val</span> stderr</span> : <code class="type">unit -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Output.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALwriter"><span class="keyword">val</span> writer</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Output.format" class="ocaml_internal">format</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Import.Writer.t">Import.Writer.t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Output.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALfile"><span class="keyword">val</span> file</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Output.format" class="ocaml_internal">format</a> -&gt; filename:string -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Output.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALrotating_file"><span class="keyword">val</span> rotating_file</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Output.format" class="ocaml_internal">format</a> -&gt; basename:string -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Rotation.t" class="ocaml_internal">Rotation.t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Output.t" class="ocaml_internal">t</a></code></pre><div class="info">See Async_extended.Std.Log for syslog and colorized console output.</div>
<pre class="odoccode"><span class="VALmachine_readable_format_of_sexp"><span class="keyword">val</span> machine_readable_format_of_sexp</span> : <code class="type"><a href="http://127.0.0.1:8000/sexplib/#Sexp.t">Sexplib.Sexp.t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Output.machine_readable_format" class="ocaml_internal">machine_readable_format</a></code></pre>
<pre class="odoccode"><span class="VAL__machine_readable_format_of_sexp__"><span class="keyword">val</span> __machine_readable_format_of_sexp__</span> : <code class="type"><a href="http://127.0.0.1:8000/sexplib/#Sexp.t">Sexplib.Sexp.t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Output.machine_readable_format" class="ocaml_internal">machine_readable_format</a></code></pre>
<pre class="odoccode"><span class="VALsexp_of_machine_readable_format"><span class="keyword">val</span> sexp_of_machine_readable_format</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Output.machine_readable_format" class="ocaml_internal">machine_readable_format</a> -&gt; <a href="http://127.0.0.1:8000/sexplib/#Sexp.t">Sexplib.Sexp.t</a></code></pre>
<pre class="odoccode"><span class="VALformat_of_sexp"><span class="keyword">val</span> format_of_sexp</span> : <code class="type"><a href="http://127.0.0.1:8000/sexplib/#Sexp.t">Sexplib.Sexp.t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Output.format" class="ocaml_internal">format</a></code></pre>
<pre class="odoccode"><span class="VAL__format_of_sexp__"><span class="keyword">val</span> __format_of_sexp__</span> : <code class="type"><a href="http://127.0.0.1:8000/sexplib/#Sexp.t">Sexplib.Sexp.t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Output.format" class="ocaml_internal">format</a></code></pre>
<pre class="odoccode"><span class="VALsexp_of_format"><span class="keyword">val</span> sexp_of_format</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Output.format" class="ocaml_internal">format</a> -&gt; <a href="http://127.0.0.1:8000/sexplib/#Sexp.t">Sexplib.Sexp.t</a></code></pre></div></div>
<div class="ocaml_module" name="Blocking"><pre class="odoccode"><span class="keyword">module</span> <a href="http://127.0.0.1:8000/async_extra/#Log.Blocking" class="ocaml_internal">Blocking</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<div class="info">Async programs often have a non-Async portion that runs before the scheduler begins
to capture command line options, do setup, read configs, etc. This module provides
limited global logging functions to be used during that period. Calling these
functions after the scheduler has started will raise an exception. They otherwise
behave similarly to the logging functions in the Async world.</div>
<div class="ocaml_module" name="Output"><pre class="odoccode"><span class="keyword">module</span> <a href="http://127.0.0.1:8000/async_extra/#Log.Blocking.Output" class="ocaml_internal">Output</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> t</span></pre>
<pre class="odoccode"><span class="VALstdout"><span class="keyword">val</span> stdout</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Blocking.Output.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALstderr"><span class="keyword">val</span> stderr</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Blocking.Output.t" class="ocaml_internal">t</a></code></pre>
<div class="info">See Async_extended.Std.Log for syslog and colorized console output.</div>
<pre class="odoccode"><span class="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">(<a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">Message.t</a> -&gt; unit) -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Blocking.Output.t" class="ocaml_internal">t</a></code></pre></div></div>
<pre class="odoccode"><span class="VALset_level"><span class="keyword">val</span> set_level</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Level.t" class="ocaml_internal">Level.t</a> -&gt; unit</code></pre>
<pre class="odoccode"><span class="VALset_output"><span class="keyword">val</span> set_output</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Blocking.Output.t" class="ocaml_internal">Output.t</a> -&gt; unit</code></pre>
<pre class="odoccode"><span class="VALraw"><span class="keyword">val</span> raw</span> : <code class="type">?tags:(string * string) list -&gt; ('a, unit, string, unit) format4 -&gt; 'a</code></pre><div class="info"><code class="code">raw</code> printf like logging for raw (no level) messages. Raw messages are still
output with a timestamp.</div>
<pre class="odoccode"><span class="VALinfo"><span class="keyword">val</span> info</span> : <code class="type">?tags:(string * string) list -&gt; ('a, unit, string, unit) format4 -&gt; 'a</code></pre><div class="info"><code class="code">info</code> printf like logging at the `Info log level</div>
<pre class="odoccode"><span class="VALerror"><span class="keyword">val</span> error</span> : <code class="type">?tags:(string * string) list -&gt; ('a, unit, string, unit) format4 -&gt; 'a</code></pre><div class="info"><code class="code">error</code> printf like logging at the `Info log level</div>
<pre class="odoccode"><span class="VALdebug"><span class="keyword">val</span> debug</span> : <code class="type">?tags:(string * string) list -&gt; ('a, unit, string, unit) format4 -&gt; 'a</code></pre><div class="info"><code class="code">error</code> printf like logging at the `Info log level</div></div></div>
<pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> t</span></pre>
<div class="ocaml_modtype" name="Global_intf"><pre class="odoccode"><span class="keyword">module type</span> <a href="http://127.0.0.1:8000/async_extra/#Log:Global_intf" class="ocaml_internal">Global_intf</a> = <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"><div class="info">An interface for singleton logs</div></div><div class="ocaml_content">
<pre class="odoccode"><span class="VALlog"><span class="keyword">val</span> log</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.t" class="ocaml_internal">t</a> <a href="http://127.0.0.1:8000/core/#Std.Lazy.t">Core.Std.Lazy.t</a></code></pre>
<pre class="odoccode"><span class="VALset_level"><span class="keyword">val</span> set_level</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Level.t" class="ocaml_internal">Level.t</a> -&gt; unit</code></pre>
<pre class="odoccode"><span class="VALset_output"><span class="keyword">val</span> set_output</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Output.t" class="ocaml_internal">Output.t</a> list -&gt; unit</code></pre>
<pre class="odoccode"><span class="VALraw"><span class="keyword">val</span> raw</span> : <code class="type">?tags:(string * string) list -&gt; ('a, unit, string, unit) format4 -&gt; 'a</code></pre><div class="info">logging functions as the functions that operate on a given log. In this case they
operate on a single log global to the module</div>
<pre class="odoccode"><span class="VALinfo"><span class="keyword">val</span> info</span> : <code class="type">?tags:(string * string) list -&gt; ('a, unit, string, unit) format4 -&gt; 'a</code></pre>
<pre class="odoccode"><span class="VALerror"><span class="keyword">val</span> error</span> : <code class="type">?tags:(string * string) list -&gt; ('a, unit, string, unit) format4 -&gt; 'a</code></pre>
<pre class="odoccode"><span class="VALdebug"><span class="keyword">val</span> debug</span> : <code class="type">?tags:(string * string) list -&gt; ('a, unit, string, unit) format4 -&gt; 'a</code></pre>
<pre class="odoccode"><span class="VALflushed"><span class="keyword">val</span> flushed</span> : <code class="type">unit -&gt; unit <a href="http://127.0.0.1:8000/async_extra/#Import.Deferred.t">Import.Deferred.t</a></code></pre>
<pre class="odoccode"><span class="VALprintf"><span class="keyword">val</span> printf</span> : <code class="type">?tags:(string * string) list -&gt;
?level:<a href="http://127.0.0.1:8000/async_extra/#Log.Level.t" class="ocaml_internal">Level.t</a> -&gt; ('a, unit, string, unit) format4 -&gt; 'a</code></pre>
<pre class="odoccode"><span class="VALsexp"><span class="keyword">val</span> sexp</span> : <code class="type">?tags:(string * string) list -&gt;
?level:<a href="http://127.0.0.1:8000/async_extra/#Log.Level.t" class="ocaml_internal">Level.t</a> -&gt; 'a -&gt; ('a -&gt; <a href="http://127.0.0.1:8000/core/#Std.Sexp.t">Core.Std.Sexp.t</a>) -&gt; unit</code></pre>
<pre class="odoccode"><span class="VALof_lazy"><span class="keyword">val</span> of_lazy</span> : <code class="type">?tags:(string * string) list -&gt;
?level:<a href="http://127.0.0.1:8000/async_extra/#Log.Level.t" class="ocaml_internal">Level.t</a> -&gt; string <a href="http://127.0.0.1:8000/core/#Std.Lazy.t">Core.Std.Lazy.t</a> -&gt; unit</code></pre>
<pre class="odoccode"><span class="VALmessage"><span class="keyword">val</span> message</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">Message.t</a> -&gt; unit</code></pre></div></div>
<div class="ocaml_module" name="Make_global" path="http://127.0.0.1:8000/async_extra/#Log:Global_intf"><pre class="odoccode"><span class="keyword">module</span> <a href="http://127.0.0.1:8000/async_extra/#Log.Make_global" class="ocaml_internal">Make_global</a> : <code class="type"><div class="sig_block"><code class="code">functor (</code><code class="code">Empty</code><code class="code"> : </code><code class="code">sig</code> .. <code class="code">end</code><code class="code">) -&gt; </code><code class="code"><a href="http://127.0.0.1:8000/async_extra/#Log:Global_intf" class="ocaml_internal">Global_intf</a></code></div></code></pre><div class="ocaml_summary"><div class="info">This functor can be called to generate &quot;singleton&quot; logging modules</div></div></div>
<div class="ocaml_module" name="Global" path="http://127.0.0.1:8000/async_extra/#Log:Global_intf"><pre class="odoccode"><span class="keyword">module</span> <a href="http://127.0.0.1:8000/async_extra/#Log.Global" class="ocaml_internal">Global</a> : <code class="type"><code class="code"><a href="http://127.0.0.1:8000/async_extra/#Log:Global_intf" class="ocaml_internal">Global_intf</a></code></code></pre><div class="ocaml_summary"><div class="info">Programs that want simplistic single-channel logging can open this module. It
provides a global logging facility to a single output type at a single level. More
nuanced logging can be had by using the functions that operate on a distinct Log.t
type.</div></div></div>
<pre class="odoccode"><span class="VALset_level"><span class="keyword">val</span> set_level</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.t" class="ocaml_internal">t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Level.t" class="ocaml_internal">Level.t</a> -&gt; unit</code></pre><div class="info"><code class="code">set_level</code> sets the level of the given log. Messages sent at a level less than the
current level will not be output.</div>
<pre class="odoccode"><span class="VALset_output"><span class="keyword">val</span> set_output</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.t" class="ocaml_internal">t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Output.t" class="ocaml_internal">Output.t</a> list -&gt; unit</code></pre><div class="info"><code class="code">set_output</code> changes the output type of the log, which can be useful when daemonizing.
The new output type will be applied to all subsequent messages.</div>
<pre class="odoccode"><span class="VALclose"><span class="keyword">val</span> close</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.t" class="ocaml_internal">t</a> -&gt; unit</code></pre><div class="info"><code class="code">close</code> closes a log so that further write attempts will raise an error.</div>
<pre class="odoccode"><span class="VALflushed"><span class="keyword">val</span> flushed</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.t" class="ocaml_internal">t</a> -&gt; unit <a href="http://127.0.0.1:8000/async_extra/#Import.Deferred.t">Import.Deferred.t</a></code></pre><div class="info"><code class="code">flushed</code> returns a Deferred.t that is fulfilled when the last message delivered to t
before the call to flushed is out the door.</div>
<pre class="odoccode"><span class="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">level:<a href="http://127.0.0.1:8000/async_extra/#Log.Level.t" class="ocaml_internal">Level.t</a> -&gt; output:<a href="http://127.0.0.1:8000/async_extra/#Log.Output.t" class="ocaml_internal">Output.t</a> list -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.t" class="ocaml_internal">t</a></code></pre><div class="info"><code class="code">create</code> create a new log</div>
<pre class="odoccode"><span class="VALraw"><span class="keyword">val</span> raw</span> : <code class="type">?tags:(string * string) list -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.t" class="ocaml_internal">t</a> -&gt; ('a, unit, string, unit) format4 -&gt; 'a</code></pre><div class="info"><code class="code">raw</code> printf like logging for raw (no level) messages. Raw messages are still
output with a timestamp.</div>
<pre class="odoccode"><span class="VALdebug"><span class="keyword">val</span> debug</span> : <code class="type">?tags:(string * string) list -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.t" class="ocaml_internal">t</a> -&gt; ('a, unit, string, unit) format4 -&gt; 'a</code></pre><div class="info"><code class="code">debug</code> printf like logging at the `Debug log level</div>
<pre class="odoccode"><span class="VALinfo"><span class="keyword">val</span> info</span> : <code class="type">?tags:(string * string) list -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.t" class="ocaml_internal">t</a> -&gt; ('a, unit, string, unit) format4 -&gt; 'a</code></pre><div class="info"><code class="code">info</code> printf like logging at the `Info log level</div>
<pre class="odoccode"><span class="VALerror"><span class="keyword">val</span> error</span> : <code class="type">?tags:(string * string) list -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.t" class="ocaml_internal">t</a> -&gt; ('a, unit, string, unit) format4 -&gt; 'a</code></pre><div class="info"><code class="code">error</code> printf like logging at the `Error log level</div>
<pre class="odoccode"><span class="VALprintf"><span class="keyword">val</span> printf</span> : <code class="type">?tags:(string * string) list -&gt;
?level:<a href="http://127.0.0.1:8000/async_extra/#Log.Level.t" class="ocaml_internal">Level.t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.t" class="ocaml_internal">t</a> -&gt; ('a, unit, string, unit) format4 -&gt; 'a</code></pre><div class="info"><code class="code">printf</code> generalized printf style logging</div>
<pre class="odoccode"><span class="VALsexp"><span class="keyword">val</span> sexp</span> : <code class="type">?tags:(string * string) list -&gt;
?level:<a href="http://127.0.0.1:8000/async_extra/#Log.Level.t" class="ocaml_internal">Level.t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.t" class="ocaml_internal">t</a> -&gt; 'a -&gt; ('a -&gt; <a href="http://127.0.0.1:8000/core/#Std.Sexp.t">Core.Std.Sexp.t</a>) -&gt; unit</code></pre><div class="info"><code class="code">sexp</code> logging of values without first converting them to a string. In the case
where the log level would discard this message no conversion will ever be done.</div>
<pre class="odoccode"><span class="VALof_lazy"><span class="keyword">val</span> of_lazy</span> : <code class="type">?tags:(string * string) list -&gt;
?level:<a href="http://127.0.0.1:8000/async_extra/#Log.Level.t" class="ocaml_internal">Level.t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.t" class="ocaml_internal">t</a> -&gt; string <a href="http://127.0.0.1:8000/core/#Std.Lazy.t">Core.Std.Lazy.t</a> -&gt; unit</code></pre><div class="info"><code class="code">of_lazy</code> logging of lazy values. In the case where the log level would discard this
message no evaluation will ever be forced.</div>
<pre class="odoccode"><span class="VALmessage"><span class="keyword">val</span> message</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.t" class="ocaml_internal">t</a> -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">Message.t</a> -&gt; unit</code></pre>
<div class="ocaml_module" name="Reader"><pre class="odoccode"><span class="keyword">module</span> <a href="http://127.0.0.1:8000/async_extra/#Log.Reader" class="ocaml_internal">Reader</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="VALpipe"><span class="keyword">val</span> pipe</span> : <code class="type">[&lt; <a href="http://127.0.0.1:8000/async_extra/#Log.Output.machine_readable_format" class="ocaml_internal">Output.machine_readable_format</a> ] -&gt;
string -&gt; <a href="http://127.0.0.1:8000/async_extra/#Log.Message.t" class="ocaml_internal">Message.t</a> <a href="http://127.0.0.1:8000/async_extra/#Import.Pipe.Reader.t">Import.Pipe.Reader.t</a></code></pre><div class="info"><code class="code">pipe format filename</code> returns a pipe of all the messages in the log. Errors
encountered when opening or reading the file will be thrown as exceptions into the
monitor current at the time pipe is called.</div></div></div>
<pre class="odoccode"><span class="VALsexp_of_t"><span class="keyword">val</span> sexp_of_t</span> : <code class="type"><a href="http://127.0.0.1:8000/async_extra/#Log.t" class="ocaml_internal">t</a> -&gt; <a href="http://127.0.0.1:8000/sexplib/#Sexp.t">Sexplib.Sexp.t</a></code></pre>
</div></div>